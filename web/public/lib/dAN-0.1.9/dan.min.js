/*!
 * dimtrov Ajax Nav - https://dimtrov.hebfree.org/works/dan
 * Version - 0.1.9
 * Licensed under the MPL-2 license - http://opensource.org/licenses/MPL-2
 *
 * Copyright (c) 2020 Dimtrov Sarl
 * Copyright (c) 2020 Dimitri Sitchet Tomkeu
 */
!function(t){t.dAN={opt:{},normalise(){void 0!==this.opt.url&&null!=this.opt.url||void 0===this.opt.href||(this.opt.url=this.opt.href),"string"==typeof this.opt.animation&&(this.opt.animation=this.opt.animation.toLowerCase()),-1==t.inArray(this.opt.animation,["fade","google","facebook","bar","progress","spinner","false",!1])&&(this.opt.animation="fade"),"number"!=typeof this.opt.duration?this.opt.duration=1:this.opt.duration<.5?this.opt.duration=.5:this.opt.duration>30&&(this.opt.duration=30),"boolean"!=typeof this.opt.render&&(this.opt.render=!0),"boolean"!=typeof this.opt.setlocation&&(this.opt.setlocation=!1),"string"==typeof this.opt.method&&-1!=t.inArray(this.opt.method.toUpperCase(),["GET","POST","PUT","DELETE","HEAD"])||(this.opt.method="GET"),"function"!=typeof this.opt.success&&(this.opt.success=null),"function"!=typeof this.opt.error&&(this.opt.error=null),"true"==t('[data-dan-box="'+this.opt.target+'"]').attr("data-dan-main")&&(void 0!==this.opt.animation&&"google"==this.opt.animation||(this.opt.animation="progress"),this.opt.setlocation=!0)},animate(a){t(".dan-google-loader, .dan-bar-loader, .dan-spinner-loader").remove(),box=t('[data-dan-box="'+this.opt.target+'"]'),!1!==this.opt.animation&&"false"!==this.opt.animation||a(),"fade"==this.opt.animation&&(box.hide(),a(),box.fadeIn("slow")),"spinner"===this.opt.animation&&(box.empty().prepend('<div class="dan-spinner-loader"></div>'),a()),"facebook"===this.opt.animation&&(box.empty().prepend('<div class="dan-facebook-loader"><div></div><div></div><div></div></div>'),a()),"google"==this.opt.animation&&("true"==box.attr("data-dan-main")?t("body").prepend('<div class="dan-google-loader" style="position:fixed"><div></div><div></div><div></div></div>'):box.prepend('<div class="dan-google-loader"><div></div><div></div><div></div></div>'),a()),"bar"!=this.opt.animation&&"progress"!=this.opt.animation||("true"==box.attr("data-dan-main")?t("body").prepend('<div class="dan-bar-loader" style="position:fixed"><div></div></div>'):box.prepend('<div class="dan-bar-loader"><div></div></div>'),a())},init(){t("[data-dan-target]").length>0&&t("[data-dan-target]").each((function(){t(this).click((function(a){a.preventDefault();var o=t(this);options=new Object,void 0!==o.attr("data-dan-target")&&(options.target=o.attr("data-dan-target")),void 0!==o.attr("data-dan-animation")&&(options.animation=o.attr("data-dan-animation")),void 0!==o.attr("data-dan-duration")&&(options.duration=o.attr("data-dan-duration")),void 0!==o.attr("data-dan-render")&&(options.render=o.attr("data-dan-render")),void 0!==o.attr("data-dan-setlocation")&&(options.setlocation=o.attr("data-dan-setlocation")),void 0!==o.attr("data-dan-method")&&(options.method=o.attr("data-dan-method")),void 0!==o.attr("data-dan-post")&&(options.post=o.attr("data-dan-post")),void 0!==o.attr("data-dan-success")&&(options.success=o.attr("data-dan-success")),void 0!==o.attr("data-dan-error")&&(options.error=o.attr("data-dan-error")),void 0!==o.attr("href")?options.url=o.attr("href"):void 0!==o.attr("data-dan-href")?options.url=o.attr("data-dan-href"):void 0!==o.attr("data-dan-url")&&(options.url=o.attr("data-dan-url")),o.dAN(options)}))})),t("[data-dan-params]").length>0&&t("[data-dan-params]").each((function(){t(this).click((function(a){a.preventDefault();var o=t(this);try{var i=o.attr("data-dan-params");i=JSON.parse(i),o.dAN(i)}catch(t){console.log("Can't make navigation with dAN because an error is anccoured : [ "+t+" ]")}}))}))},dAN(a){return this.opt=t.extend({animation:"fade",duration:2,setlocation:!1,render:!0,target:null,url:null,method:"GET",post:null,success:null,error:null},a),this.normalise(),t(this).each((function(){let a=this.opt,o={type:a.method,url:a.url,cache:!1};a.post&&"object"==typeof a.post&&(o.data=a.post),this.animate((function(){t.ajax(o).done((function(o,i,n){setTimeout((function(){!0===a.render&&t('[data-dan-box="'+a.target+'"]').html(o),!0===a.setlocation&&history.pushState({url:a.url},"",a.url),t(".dan-google-loader, .dan-bar-loader, .dan-spinner-loader").remove(),a.success&&a.success(o,i,n)}),1e3*a.duration)})).fail((function(t,o,i){a.error?a.error(t,o,i):console.log({Request:t,status:o,error:i})}))}))}))}},t.fn.dAN=function(a){return t.dAN.dAN(a)}}(jQuery),$(document).ready((function(){$.dAN.init()}));
